# プリプロセッサ

コンパイラが動作する前にソースコードに前処理を行うソフトウェア(プログラム)。前処理自体はプリプロセス、実行するプログラムがプリプロセッサという。

コンパイル作業をしやすくするためにソース・ファイルを加工する。

主に以下の3つの役割がある。

- インクルード処理
- マクロ処理
- コンパイル対象の条件分岐

# インクルード処理　#include
　
プリプロセッサが指定されたファイルを探し出し、#include命令が書かれた部分を置き換える。つまりincludeしたファイルの中身に置き換わる。

## ""と<>の違い

#includeには２種類ある。

```
#include <stdio.h>
#include "mylib.h"
```

- <>でくくるとコンパイラのインクルードパスで設定されたパスから探す。標準的なincludeファイルを読み込む
- ""はカレントディレクトリを探してから、次にコンパイラから探す。開発者が自作したincludeファイルはこちらでくくる。

自作したファイルを何もせずに読み込むならダブルクォーテーションを使うしかない。括弧では認識されない。
逆に括弧では自作ファイルを読み込むのも可能


# マクロ処理 　#define

ソースコード内の文字列を別の文字列に置換する。これを展開と呼ぶ。

```
#define PI 3.1415
//これは前処理時に該当箇所を置換してしまう。
```

## 定数との違いは？

定数と似ているのでは？。実際そう。この置換は`マクロ定数`とも呼ばれる。ただ定数はその後の再代入が不可。またマクロ処理は関数にも適応できる。そちらのが重要度がある。

しかし、型、構文チェックが働かない事もあるのでデバッグが困難になる。

## define 文字列1

主にプリプロセス時のフラグとして使われる。

挙動としては文字列を空文字列に置き換えている。

インクルードガードの処理に使われる。

ex)define.c

# 分岐処理

コードのコンパイルする部分を選択することが可能になる。


# インクルードガード

同じヘッダファイルを２回以上読み込まれる場合の影響をなくす。

以下のような目的もある。

- コンパイルの高速化
- includeディレクティブによる２つのファイルの相互インクルード防止

```
#ifndef XXXX //XXXXが定義されていなかったら

#define XXXX //XXXXを定義


#endif
```



